<div class ="contents row">
  <div class="container">
    <div class="more">

      <div class="container">
        <%= simple_format(@post.title) %>
        <%= @post.file %><p></p>
        <%= @post.detail %><p></p>
      </div>

      <% if user_signed_in? && current_user.id == @post.user_id %>
        <%= link_to '編集', "/posts/#{@post.id}/edit", method: :get, :class=>"btn btn-secondary" %>
        <%= link_to '削除', "/posts/#{@post.id}", method: :delete, :class=>"btn btn-secondary" %>
      <% end %><p></p>

      <% if current_user %>
        <%= form_with(model: [@post, @comment], local: true) do |form| %>
          <%= form.text_area :text, placeholder: "コメントする", rows: "2" , :class=>"form-control" %><p></p>
          <%= form.submit "送信", :class=>"btn btn-primary" %>
        <% end %>
      <% else %>
        <strong><p>※コメントの投稿には新規登録/ログインが必要です</p></strong>
      <% end %><p></p>

      <hr>
      <div class="comments">
        <h4>コメント一覧</h4>
        <% if @comments %>
          <% @comments.each do |comment| %><p></p>
              <%= link_to comment.user.name, "/users/#{comment.user_id}" %>：
              <%= comment.text %>
            </p>
          <% end %>
        <% end %>
      </div>

    </div>
  </div>
</div>

<%#参考 https://master.tech-camp.in/curriculums/3633#3 %>